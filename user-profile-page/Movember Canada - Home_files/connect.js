!function(e,t){"use strict";function n(e,t){try{e.style.display="none",t.removeChild(e)}catch(e){r._debug}}var o="https://connect.humanapi.co",r={},i=null,l=null,s=null;if(!e.HumanConnect){var a,d,u=function(e){r._debug;try{var t=JSON.parse(e.data);if("hapi-connect-close"===t.type&&i&&(n(i,a),l&&n(l,a),r.onClose&&r.onClose(),s&&n(s,a),a.style.overflow=d),"hapi-connect-finish"===t.type&&i&&(n(i,a),l&&n(l,a),r.onFinish&&r.onFinish(null,t.token),s&&n(s,a),a.style.overflow=d),"hapi-connect-open"===t.type&&(store&&store.set("humanapiSessionToken",t.token.sessionToken),s&&n(s,a)),"hapi-connect-popup-iframe"===t.type&&p(t.url,"hapi-popup-iframe"),"hapi-close-popup-iframe"===t.type){var o=document.getElementById("hapi-popup-iframe");o.parentElement.removeChild(o),i.contentWindow.postMessage(JSON.stringify({type:"hapi-external-auth-added"}),"*")}"hapi-close-popup-mobile"===t.type&&i.contentWindow.postMessage(JSON.stringify({type:"hapi-external-auth-added"}),"*"),"hapi-connect-error"===t.type&&r.onError&&r.onError(t.error)}catch(e){r._debug}};e.addEventListener?e.addEventListener("message",u,!1):e.attachEvent&&e.attachEvent("onmessage",u);var c=function(e,t,n){var i=r.publicToken,l=o+"?clientUserId="+t;return l+=e?"&clientId="+e:"",l+=i?"&publicToken="+i:"",l+=n?"&sessionToken= "+n:"",l+=r.iframeFlag?"&iframeFlag=1":"",l+=r.embed?"&embed=1":"",l+="&lang="+r.language,l+=r.addedSource?"&addedSource="+r.addedSource:"",l+=r._isDevPortal?"&devPortal=1":"",l+=r.__finishUrl?"&finishUrl="+encodeURIComponent(r.__finishUrl):"",l+=r.__closeUrl?"&closeUrl="+encodeURIComponent(r.__closeUrl):"",l+=r.style?"&style="+encodeURIComponent(JSON.stringify(r.style)):"",l+=r.userName?"&userName="+encodeURIComponent(r.userName):"",l+=r.userEmail?"&userEmail="+encodeURIComponent(r.userEmail):"",l+=r.providerSiteUrl?"&providerSiteUrl="+encodeURIComponent(r.providerSiteUrl):"",l+=r.providerName?"&providerName="+encodeURIComponent(r.providerName):"",l+=r.modal?"&modal=1":"",l+=r.mode?"&mode="+r.mode:"",l+=r.test?"&test="+r.test:"",l+=r.ka?"&ka="+r.ka:"",l+=r.sourceId?"&sourceId="+r.sourceId:"",["uiExcludeSplash","uiExcludeSuccess","uiIncludePreset","uiPresetAllowRegular"].forEach(function(e){void 0!==r[e]&&(l+="&"+e+"="+r[e])}),p(l,!1)},p=function(e,t){var n=null;return n=document.createElement("iframe"),n.src=e,n.style.width="100%",n.style.height="100%",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.overflowX="hidden",n.style.zIndex="99999",n.style.display="block",n.style.margin="0",n.style.padding="0",n.style.border="0px none transparent",n.style.visibility="visible",n.style.backgroundColor=r.modal?"transparent":"#ffffff",n.style.overflowY="auto",n.style["-webkit-tap-highlight-color"]="transparent",n.setAttribute("frameBorder","0"),n.setAttribute("allowtransparency","true"),n.id=!1!==t?t:"human-connect",a.appendChild(n),[n,null]},m=function(){var e=document.createElement("img");return e.src=o+"/spinner.gif",e.style.height="30px",e.style.width="30px",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.marginLeft="-15px",e.style.zIndex="99999",a.appendChild(e),e};document.getElementsByTagName("head")[0]||document.documentElement;r.open=function(e){a=document.getElementsByTagName("body")[0]||document.documentElement,d=a.style.overflow,!1!==e.spinner&&(s=m());var t=e.clientId,n=e.clientUserId;e._baseURL&&(o=e._baseURL);var u=e.publicToken||r.publicToken;r.publicToken=u,r.onFinish=e.finish,r.onClose=e.close,r.onError=e.error,r.iframeFlag=!1,r._debug=e._debug,r._isDevPortal=e._isDevPortal,r.language=e.language||"en",r.embed=e.embed||!1,r.uiState=e.uiState||!1,r.uiMessageType=e.uiMessageType||!1,r.__finishUrl=e.__finishUrl,r.__closeUrl=e.__closeUrl,r.style=e.style||!1,r.addedSource=e.addedSource||!1,r.modal=e.modal||0,r.mode=e.mode,r.test=e.test,r.ka=e.ka,r.sourceId=e.sourceId,["uiExcludeSplash","uiExcludeSuccess","uiIncludePreset","uiPresetAllowRegular","providerName","providerSiteUrl","userName","userEmail"].forEach(function(t){void 0!==e[t]&&(r[t]=e[t])});var p=[];p=c(t,n,null),i=p[0],l=p[1]},r.setPublicToken=function(e){r.publicToken=e},e.HumanConnect=r}}(this);